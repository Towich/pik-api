# Pik Yauza Park Telegram Bot

–ë–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã-—Å—Ç—É–¥–∏–∏ –∏ 1-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ –ñ–ö ¬´–Ø—É–∑–∞ –ü–∞—Ä–∫¬ª –æ—Ç –ü–ò–ö –∏ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

2.  –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```
TELEGRAM_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
TELEGRAM_CHAT_ID=–≤–∞—à_–ª–∏—á–Ω—ã–π_chat_id

# –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
PIK_BASE_URL=https://api.pik.ru        # –±–∞–∑–æ–≤—ã–π URL API –ü–ò–ö
YAUZA_BLOCK_ID=1220                   # ID –±–ª–æ–∫–∞ ¬´–Ø—É–∑–∞ –ü–∞—Ä–∫¬ª
SUMMARY_INTERVAL_SECONDS=14400        # –∫–∞–∫ —á–∞—Å—Ç–æ —Å–ª–∞—Ç—å —Å–≤–æ–¥–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4 —á)
DATABASE_PATH=pik_yauza.db            # –ø—É—Ç—å –∫ SQLite-—Ñ–∞–π–ª—É
```

3.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
python -m bot.main
```

> ‚ö†Ô∏è  **–í–∞–∂–Ω–æ.** –ë–æ—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `api.pik.ru`. –ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –µ–≥–æ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞   | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----------|
| `/start`  | –∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ |
| `/studios`| 10 —Å–∞–º—ã—Ö –¥–µ—à—ë–≤—ã—Ö —Å—Ç—É–¥–∏–π (—É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) |
| `/one`    | 10 —Å–∞–º—ã—Ö –¥–µ—à—ë–≤—ã—Ö 1-–∫–æ–º–Ω–∞—Ç–Ω—ã—Ö –∫–≤–∞—Ä—Ç–∏—Ä |
| `/stats`  | –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–≤–æ–±–æ–¥–Ω—ã–º –∫–≤–∞—Ä—Ç–∏—Ä–∞–º (—Å–º. –Ω–∏–∂–µ) |
| `/mock`   | (dev) —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç –∏–∑ `mock_data.json` |

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ `/stats`:

```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚Ä¢ üè† –°—Ç—É–¥–∏–∏: 68 —Å–≤–æ–±–æ–¥–Ω–æ (–±—Ä–æ–Ω—å 3)
‚Ä¢ üö™ 1-–∫.: 134 —Å–≤–æ–±–æ–¥–Ω–æ (–±—Ä–æ–Ω—å 6)

üí∏ –¢–æ–ø-3 –¥–µ—à—ë–≤—ã—Ö —Å—Ç—É–¥–∏–π (—Å–≤–æ–±–æ–¥–Ω—ã–µ)
1Ô∏è‚É£ 5.46 –º–ª–Ω
2Ô∏è‚É£ 5.50 –º–ª–Ω
3Ô∏è‚É£ 5.56 –º–ª–Ω

üí∏ –¢–æ–ø-3 –¥–µ—à—ë–≤—ã—Ö 1-–∫. (—Å–≤–æ–±–æ–¥–Ω—ã–µ)
1Ô∏è‚É£ 7.44 –º–ª–Ω
2Ô∏è‚É£ 7.48 –º–ª–Ω
3Ô∏è‚É£ 7.55 –º–ª–Ω
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç –∫–∞–∂–¥—ã–µ 4 —á–∞—Å–∞ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ª–∏–±–æ –∫—Ä–∞—Ç–∫–æ–µ ¬´üìù –ò–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç¬ª, –ª–∏–±–æ –ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç —Å diff –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **`PIKApiClient`** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç `api.pik.ru`  
- **`FlatRepository`** ‚Äî SQLite + SQL-upsert –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è  
- **`MonitorService`** ‚Äî –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É  
- **Telegram Bot** (`python-telegram-bot`) + JobQueue ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `loguru`; –≤—Å–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ `api.pik.ru` –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–æ–¥–æ–º –æ—Ç–≤–µ—Ç–∞. 